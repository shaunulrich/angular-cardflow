/*
 * angular-cardflow
 *
 * Efficient & versatile CSS3 carousel/coverflow for angular
 * https://github.com/wouldgo/angular-cardflow
 * David Konsumer <konsumer@jetboystudio.com>
 * Dario Andrei <wouldgo84@gmail.com>
 * 
 * MIT license
 * 2015-09-15T12:33:47.421Z
 */
!function(){"use strict";var e=function(e,o){var n,d,r=window.getComputedStyle(e);if(r){if(angular.forEach(["moz","o","webkit"],function(e){r[e+"Transform"]&&(n=r[e+"Transform"],d=e)}),n){var t=n.match(/\d+/g);t=t&&6==t.length?t.map(function(e){return Number(e)}):[1,0,0,1,0,0]}else t=[1,0,0,1,0,0];for(var l=0;6>l;l++)void 0!==o[l]&&(t[l]=o[l]);var i={};d?i[d+"Transform"]="matrix("+t.join(",")+")":i.transform="matrix("+t.join(",")+")",angular.element(e).css(i)}},o=angular.module("angular-cardflow",["ngTouch"]);o.directive("cardflow",["$swipe","$timeout",function(o,n){return{restrict:"E",template:'<div class="cardflow-wrapper" ng-swipe-left="swipeLeft($event)" ng-swipe-right="swipeRight($event)"><div class="cardflow-container" ng-transclude></div></div>',transclude:!0,scope:{model:"=?",mode:"=?",current:"=?"},link:function(d,r,t){n(function(){function n(o){e(d.model.containerEl[0],[void 0,void 0,void 0,void 0,o,void 0])}if(d.model=d.model||{},d.model.cardWidth=0,d.model.wrapperEl=angular.element(r.find("div")[0]),d.model.containerEl=angular.element(d.model.wrapperEl.find("div")[0]),d.model.current=d.current||d.model.current||0,d.model.cards=d.model.cards||[],d.mode=t.mode||"swipeSnapKinetic",d.model.increment=1,d.model.setPositionX=n,d.$watch(function(){return d.model.cards},function(){if(d.model.cardEls=d.model.containerEl.children(),d.model.cardEls&&d.model.cardEls[1]){d.model.cardWidth=d.model.cardEls[1].offsetLeft-d.model.cardEls[0].offsetLeft,0===d.model.cardWidth&&(d.model.cardWidth=d.model.cardEls[0].offsetWidth);var e=d.model.cardWidth*d.model.cardEls.length+d.model.cardEls[1].offsetLeft;d.model.containerEl.css({width:e+"px"}),d.model.pageSize=Math.floor(d.model.wrapperEl[0].clientWidth/d.model.cardWidth),d.model.increment="swipeSnapOne"==d.mode?1:d.model.pageSize}}),"swipe"!=d.mode&&d.$watch(function(){return d.model.current},function(){if(d.model.cardEls){d.model.cardEls.removeClass("cardflow-active");var e=angular.element(d.model.cardEls[d.model.current]);e.addClass("cardflow-active"),d.model.cardWidth&&n(d.model.cardWidth*-d.model.current)}}),("swipeSnapOne"==d.mode||"swipeSnapPage"==d.mode)&&(d.swipeLeft=function(){var e=d.model.current+d.model.increment;e<d.model.cardEls.length&&(d.model.current=e)},d.swipeRight=function(){var e=d.model.current-d.model.increment;e>=0&&(d.model.current=e)}),"swipeSnap"==d.mode||"swipeSnapKinetic"==d.mode||"swipe"==d.mode){var l={},i=window.getComputedStyle(d.model.containerEl[0]).transition;i&&(l.transition=i+""),angular.forEach(["moz","o","webkit","ms"],function(e){i=window.getComputedStyle(d.model.containerEl[0])[e+"Transition"],i&&(l[e+"Transition"]=i)});var a,c=0,m=0,s=0;o.bind(d.model.wrapperEl,{start:function(e){d.model.cardEls.removeClass("cardflow-active"),c="swipe"==d.mode?e.x-m:e.x,angular.forEach(["moz","o","webkit","ms"],function(e){d.model.containerEl.css(e+"Transition","none")}),d.model.containerEl.css({transition:"none"}),"swipeSnapKinetic"==d.mode&&(s=0,a=Date.now())},end:function(e){if(d.model.containerEl.css(l),"swipe"!=d.mode){var o=Math.floor(m/-d.model.cardWidth+.5);if("swipeSnapKinetic"==d.mode){var n=Date.now(),r=n-a,t=c-e.x,i=t/r;Math.abs(i)>1&&(o=Math.floor(o+i))}o>=0?o>d.model.cardEls.length-1&&(o=d.model.cardEls.length-1):o=0,d.model.current==o&&(d.model.current=-1,d.$apply()),d.model.current=o,d.$apply()}},move:function(e){m="swipe"!=d.mode?e.x-d.model.current*d.model.cardWidth-c:e.x-c,n(m)}})}})}}}])}();
//# sourceMappingURL=cardflow.min.js.map