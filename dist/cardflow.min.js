/*
 * angular-cardflow
 *
 * Efficient & versatile CSS3 carousel/coverflow for angular
 * https://github.com/wouldgo/angular-cardflow
 * David Konsumer <konsumer@jetboystudio.com>
 * Dario Andrei <wouldgo84@gmail.com>
 * 
 * MIT license
 * 2015-09-21T14:42:12.623Z
 */
!function(r){"use strict";var t=function(t,n){var e=function(r){var n,e,o=t.getComputedStyle(r);return o&&(["moz","o","webkit","ms",""].forEach(function(r){var t;t=""===r?"transform":"-"+r+"-transform",o[t]&&(n=o[t])}),n&&(e=n.match(/-*\d+/g),e&&6===e.length))?Number(e[4]):0},o=function(r,n){var e,o,d,l=t.getComputedStyle(r),c={};return l?(["moz","o","webkit","ms",""].forEach(function(r){var t;t=""===r?"transform":"-"+r+"-transform",l[t]&&(e=l[t],o=r)}),e?(d=e.match(/\d+/g),d=d&&6===d.length?d.map(function(r){return Number(r)}):[1,0,0,1,0,0]):d=[1,0,0,1,0,0],d[4]=n,o?c["-"+o+"-transform"]="matrix("+d.join(",")+")":c.transform="matrix("+d.join(",")+")",c):void 0},d=function(d,l){var c,a,i,f=r.element(l.find("div")[0]),s=r.element(f.find("div")[0]),g=function(r){r&&r.x&&(a=r.x,i=e(s[0]))},u=function(r){if(r&&r.x){var n=parseInt(t.getComputedStyle(f[0]).width,10),e=i-(a-r.x),l=d.cardflowCtrl.ngModel.cardWidth*c.length-n;0>e&&(e>-l||d.cardflowCtrl.ngModel.current===d.cardflowCtrl.ngModel.cards.length-1)&&d.$apply(function(){var r=o(s[0],e);r&&s.css(r)})}},w=function(){var t=r.element(this);c&&c.removeClass("cardflow-active"),t.addClass("cardflow-active"),d.cardflowCtrl.ngModel.selectedCard=t},h=function(){return s.children().length},m=function(){var r,n,e,o;c=s.children(),c.bind("click",w),d.cardflowCtrl.ngModel.cards&&d.cardflowCtrl.ngModel.cards.length>0&&c&&c.length>0&&(n=t.getComputedStyle(c[0]),e=parseInt(n.width,10),o=parseInt(n.marginRight,10),d.cardflowCtrl.ngModel.cardWidth=e+o,0===d.cardflowCtrl.ngModel.cardWidth&&(d.cardflowCtrl.ngModel.cardWidth=c[0].offsetWidth),r=d.cardflowCtrl.ngModel.cardWidth*c.length,s.css({width:r+"px"}),d.cardflowCtrl.ngModel.pageSize=Math.floor(f[0].clientWidth/d.cardflowCtrl.ngModel.cardWidth),d.cardflowCtrl.ngModel.increment=d.cardflowCtrl.ngModel.pageSize)},M=function(){return d.cardflowCtrl.ngModel.current},C=function(r){var t,n;d.cardflowCtrl.ngModel.cardWidth&&(n=d.cardflowCtrl.ngModel.cardWidth*r,t=o(s[0],-n),s.css(t))},v=d.$watch(h,m),p=d.$watch(M,C);n.bind(f,{start:g,move:u}),d.$on("$destroy",function(){v(),p(),c.off("click",w)})},l=function(r,t){var n=this,e=function(r,t){t&&t.cards&&(n.ngModel.cards=t.cards)},o=function(){return n.ngModel.selectedCard},d=function(){r.$emit("cardflow:new-selection",n.ngModel.selectedCard)},l=r.$on("cardflow:new-cards",e),c=t.$watch(o,d);n.ngModel=n.ngModel||{},n.ngModel.cardWidth=0,n.ngModel.cards=n.ngModel.cards||[],n.ngModel.selectedCard={},n.ngModel.current=n.ngModel.current||0,n.ngModel.increment=1,t.$on("$destroy",function(){l(),c()})};return{restrict:"E",template:['<div class="cardflow-wrapper" ','ng-swipe-left="cardflowCtrl.swipeLeft($event)" ','ng-swipe-right="cardflowCtrl.swipeRight($event)">','<div class="cardflow-container" ng-transclude>',"</div>","</div>"].join(""),transclude:!0,require:"ngModel",scope:{},bindToController:{ngModel:"=?",current:"=?"},controller:["$rootScope","$scope",l],link:d,controllerAs:"cardflowCtrl"}};r.module("angular-cardflow",["ngTouch"]).directive("cardflow",["$window","$swipe",t])}(angular);
//# sourceMappingURL=cardflow.min.js.map