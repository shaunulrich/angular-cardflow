/*
 * angular-cardflow
 *
 * Efficient & versatile CSS3 carousel/coverflow for angular
 * https://github.com/wouldgo/angular-cardflow
 * David Konsumer <konsumer@jetboystudio.com>
 * Dario Andrei <wouldgo84@gmail.com>
 * 
 * MIT license
 * 2015-09-18T14:33:30.268Z
 */
!function(r){"use strict";var t=function(t,e){var n=function(r){var e,n,o=t.getComputedStyle(r);return o&&(["moz","o","webkit","ms",""].forEach(function(r){var t;t=""===r?"transform":"-"+r+"-transform",o[t]&&(e=o[t])}),e&&(n=e.match(/-*\d+/g),n&&6===n.length))?Number(n[4]):0},o=function(r,e){var n,o,d,l=t.getComputedStyle(r),c={};return l?(["moz","o","webkit","ms",""].forEach(function(r){var t;t=""===r?"transform":"-"+r+"-transform",l[t]&&(n=l[t],o=r)}),n?(d=n.match(/\d+/g),d=d&&6===d.length?d.map(function(r){return Number(r)}):[1,0,0,1,0,0]):d=[1,0,0,1,0,0],d[4]=e,o?c["-"+o+"-transform"]="matrix("+d.join(",")+")":c.transform="matrix("+d.join(",")+")",c):void 0},d=function(d,l){var c,a,i,f=r.element(l.find("div")[0]),s=r.element(f.find("div")[0]),g=function(r){r&&r.x&&(a=r.x,i=n(s[0]))},u=function(r){if(r&&r.x){var e=parseInt(t.getComputedStyle(f[0]).width,10),n=i-(a-r.x),l=d.cardflowCtrl.ngModel.cardWidth*c.length-e;0>n&&(n>-l||d.cardflowCtrl.ngModel.current===d.cardflowCtrl.ngModel.cards.length-1)&&d.$apply(function(){var r=o(s[0],n);r&&s.css(r)})}},w=function(){var t=r.element(this);c&&c.removeClass("cardflow-active"),t.addClass("cardflow-active"),d.cardflowCtrl.ngModel.selectedCard=t},h=function(){return s.children().length},M=function(){var r;c=s.children(),c.bind("click",w),d.cardflowCtrl.ngModel.cards&&d.cardflowCtrl.ngModel.cards.length>0&&c&&c.length>0&&(d.cardflowCtrl.ngModel.cardWidth=c[1].offsetLeft-c[0].offsetLeft,0===d.cardflowCtrl.ngModel.cardWidth&&(d.cardflowCtrl.ngModel.cardWidth=c[0].offsetWidth),r=d.cardflowCtrl.ngModel.cardWidth*c.length,s.css({width:r+"px"}),d.cardflowCtrl.ngModel.pageSize=Math.floor(f[0].clientWidth/d.cardflowCtrl.ngModel.cardWidth),d.cardflowCtrl.ngModel.increment=d.cardflowCtrl.ngModel.pageSize)},m=function(){return d.cardflowCtrl.ngModel.current},C=function(r){var t,e;d.cardflowCtrl.ngModel.cardWidth&&(e=d.cardflowCtrl.ngModel.cardWidth*r,t=o(s[0],-e),s.css(t))},v=d.$watch(h,M),p=d.$watch(m,C);e.bind(f,{start:g,move:u}),d.$on("$destroy",function(){v(),p(),c.off("click",w)})},l=function(r,t){var e=this,n=function(r,t){t&&t.cards&&(e.ngModel.cards=t.cards)},o=function(){return e.ngModel.selectedCard},d=function(){r.$emit("cardflow:new-selection",e.ngModel.selectedCard)},l=r.$on("cardflow:new-cards",n),c=t.$watch(o,d);e.ngModel=e.ngModel||{},e.ngModel.cardWidth=0,e.ngModel.cards=e.ngModel.cards||[],e.ngModel.selectedCard={},e.ngModel.current=e.ngModel.current||0,e.ngModel.increment=1,t.$on("$destroy",function(){l(),c()})};return{restrict:"E",template:['<div class="cardflow-wrapper" ','ng-swipe-left="cardflowCtrl.swipeLeft($event)" ','ng-swipe-right="cardflowCtrl.swipeRight($event)">','<div class="cardflow-container" ng-transclude>',"</div>","</div>"].join(""),transclude:!0,require:"ngModel",scope:{},bindToController:{ngModel:"=?",current:"=?"},controller:["$rootScope","$scope",l],link:d,controllerAs:"cardflowCtrl"}};r.module("angular-cardflow",["ngTouch"]).directive("cardflow",["$window","$swipe",t])}(angular);
//# sourceMappingURL=cardflow.min.js.map