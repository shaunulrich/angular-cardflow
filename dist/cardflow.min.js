/*
 * angular-cardflow
 *
 * Efficient & versatile CSS3 carousel/coverflow for angular
 * https://github.com/wouldgo/angular-cardflow
 * David Konsumer <konsumer@jetboystudio.com>
 * Dario Andrei <wouldgo84@gmail.com>
 * 
 * MIT license
 * 2015-10-27T09:54:53.543Z
 */
!function(r){"use strict";var n=function(n,e,t){var o=function(r){var n,t,o=e.getComputedStyle(r);return o&&(["moz","o","webkit","ms",""].forEach(function(r){var e;e=""===r?"transform":"-"+r+"-transform",o[e]&&(n=o[e])}),n&&(t=n.match(/-*\d+/g),t&&6===t.length))?Number(t[4]):0},d=function(r,n){var t,o,d,l=e.getComputedStyle(r),c={};return l?(["moz","o","webkit","ms",""].forEach(function(r){var n;n=""===r?"transform":"-"+r+"-transform",l[n]&&(t=l[n],o=r)}),t?(d=t.match(/\d+/g),d=d&&6===d.length?d.map(function(r){return Number(r)}):[1,0,0,1,0,0]):d=[1,0,0,1,0,0],d[4]=n,o?c["-"+o+"-transform"]="matrix("+d.join(",")+")":c.transform="matrix("+d.join(",")+")",c):void 0},l=function(l,c){var a,i,f,s=r.element(c.find("div")[0]),g=r.element(s.find("div")[0]),u=0,w=function(r){r&&r.x&&(i=r.x,f=o(g[0]))},h=function(r){e.requestAnimationFrame(function(e){if(17>e-u&&r&&r.x){var t=s[0].offsetWidth,o=f-(i-r.x),c=l.cardflowCtrl.ngModel.cardWidth*a.length-t;0>o&&(o>-c||l.cardflowCtrl.ngModel.current===l.cardflowCtrl.ngModel.cards.length-1)&&l.$apply(function(){var r=d(g[0],o);r&&g.css(r)}),n.debug("Animation done")}else n.debug("Skipped animation");u=e})},m=function(){var n=r.element(this);a&&a.removeClass("cardflow-active"),n.addClass("cardflow-active"),l.cardflowCtrl.ngModel.selectedCard=n},M=function(){return g.children().length},C=function(){var r,n,t,o;a=g.children(),a.bind("click",m),l.cardflowCtrl.ngModel.cards&&l.cardflowCtrl.ngModel.cards.length>0&&a&&a.length>0&&(n=e.getComputedStyle(a[0]),t=parseInt(n.width,10),o=parseInt(n.marginRight,10),l.cardflowCtrl.ngModel.cardWidth=t+o,0===l.cardflowCtrl.ngModel.cardWidth&&(l.cardflowCtrl.ngModel.cardWidth=a[0].offsetWidth),r=l.cardflowCtrl.ngModel.cardWidth*a.length,g.css({width:r+"px"}),l.cardflowCtrl.ngModel.pageSize=Math.floor(s[0].clientWidth/l.cardflowCtrl.ngModel.cardWidth),l.cardflowCtrl.ngModel.increment=l.cardflowCtrl.ngModel.pageSize)},v=function(){return l.cardflowCtrl.ngModel.current},p=function(r){var n,e;l.cardflowCtrl.ngModel.cardWidth&&(e=l.cardflowCtrl.ngModel.cardWidth*r,n=d(g[0],-e),g.css(n))},$=l.$watch(M,C),W=l.$watch(v,p);t.bind(s,{start:w,move:h}),l.$on("$destroy",function(){$(),W(),a.off("click",m)})},c=function(r,n){var e=this,t=function(r,n){n&&n.cards&&(e.ngModel.cards=n.cards)},o=function(){return e.ngModel.selectedCard},d=function(){r.$emit("cardflow:new-selection",e.ngModel.selectedCard)},l=r.$on("cardflow:new-cards",t),c=n.$watch(o,d);e.ngModel=e.ngModel||{},e.ngModel.cardWidth=0,e.ngModel.cards=e.ngModel.cards||[],e.ngModel.selectedCard={},e.ngModel.current=e.ngModel.current||0,e.ngModel.increment=1,n.$on("$destroy",function(){l(),c()})};return{restrict:"E",template:['<div class="cardflow-wrapper" ','ng-swipe-left="cardflowCtrl.swipeLeft($event)" ','ng-swipe-right="cardflowCtrl.swipeRight($event)">','<div class="cardflow-container" ng-transclude>',"</div>","</div>"].join(""),transclude:!0,require:"ngModel",scope:{},bindToController:{ngModel:"=?",current:"=?"},controller:["$rootScope","$scope",c],link:l,controllerAs:"cardflowCtrl"}};r.module("angular-cardflow",["ngTouch"]).directive("cardflow",["$log","$window","$swipe",n])}(angular);
//# sourceMappingURL=cardflow.min.js.map